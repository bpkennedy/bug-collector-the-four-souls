import { Bug, Action, BugType, BugCategory } from '../types/game';
import { v4 as uuidv4 } from 'uuid';

// Define some basic actions that most bugs can use
const basicActions: Record<string, Action> = {
  bite: {
    id: 'bite',
    name: 'Bite',
    type: 'Offensive',
    damage: 10,
    description: 'A basic bite attack that deals moderate damage.',
    isOverworld: false,
    isBattle: true,
  },
  tackle: {
    id: 'tackle',
    name: 'Tackle',
    type: 'Offensive',
    damage: 8,
    description: 'A physical tackle that deals moderate damage.',
    isOverworld: false,
    isBattle: true,
  },
  harden: {
    id: 'harden',
    name: 'Harden',
    type: 'Defensive',
    description: 'Hardens the body, increasing defense for 3 turns.',
    isOverworld: false,
    isBattle: true,
  },
  heal: {
    id: 'heal',
    name: 'Heal',
    type: 'Support',
    description: 'Recovers a small amount of HP.',
    isOverworld: false,
    isBattle: true,
  },
};

// Type-specific actions
const typeActions: Record<BugType, Action[]> = {
  Fire: [
    {
      id: 'ember',
      name: 'Ember',
      type: 'Fire',
      damage: 15,
      statusEffect: 'Burn',
      statusEffectChance: 0.2,
      description: 'Shoots small flames that may cause burns.',
      isOverworld: false,
      isBattle: true,
    },
    {
      id: 'heat-wave',
      name: 'Heat Wave',
      type: 'Fire',
      damage: 25,
      description: 'Creates a wave of heat dealing moderate damage.',
      isOverworld: false,
      isBattle: true,
      cooldown: 2,
    },
  ],
  Water: [
    {
      id: 'bubble',
      name: 'Bubble',
      type: 'Water',
      damage: 12,
      description: 'Shoots bubbles that may slow the opponent.',
      isOverworld: false,
      isBattle: true,
    },
    {
      id: 'water-shield',
      name: 'Water Shield',
      type: 'Water',
      description: 'Creates a bubble shield reducing fire damage.',
      isOverworld: false,
      isBattle: true,
      cooldown: 3,
    },
  ],
  Grass: [
    {
      id: 'leaf-cutter',
      name: 'Leaf Cutter',
      type: 'Grass',
      damage: 14,
      description: 'Slashes with sharp leaves for damage.',
      isOverworld: false,
      isBattle: true,
    },
    {
      id: 'spore-cloud',
      name: 'Spore Cloud',
      type: 'Grass',
      statusEffect: 'Sleep',
      statusEffectChance: 0.3,
      description: 'Releases spores that may put opponent to sleep.',
      isOverworld: false,
      isBattle: true,
      cooldown: 3,
    },
  ],
  Rock: [
    {
      id: 'rock-throw',
      name: 'Rock Throw',
      type: 'Rock',
      damage: 18,
      description: 'Throws rocks for moderate damage.',
      isOverworld: false,
      isBattle: true,
    },
    {
      id: 'crystal-armor',
      name: 'Crystal Armor',
      type: 'Rock',
      description: 'Greatly increases defense for 2 turns.',
      isOverworld: false,
      isBattle: true,
      cooldown: 4,
    },
  ],
  Snow: [
    {
      id: 'ice-shard',
      name: 'Ice Shard',
      type: 'Snow',
      damage: 10,
      description: 'Fast attack that always goes first.',
      isOverworld: false,
      isBattle: true,
    },
    {
      id: 'freeze',
      name: 'Freeze',
      type: 'Snow',
      statusEffect: 'Frozen',
      statusEffectChance: 0.25,
      description: 'Chance to immobilize opponent for 1-3 turns.',
      isOverworld: false,
      isBattle: true,
      cooldown: 3,
    },
  ],
  Corruption: [
    {
      id: 'toxin',
      name: 'Toxin',
      type: 'Corruption',
      statusEffect: 'Poison',
      statusEffectChance: 0.7,
      description: 'Poisons opponent, causing damage over time.',
      isOverworld: false,
      isBattle: true,
    },
    {
      id: 'corrupt',
      name: 'Corrupt',
      type: 'Corruption',
      description: 'Reduces opponent\'s defense.',
      isOverworld: false,
      isBattle: true,
    },
  ],
};

// Create starter bugs
export const starterBugs: Bug[] = [
  {
    id: uuidv4(),
    name: 'Bout Ham',
    type: 'Fire',
    category: 'Common',
    level: 5,
    xp: 0,
    maxXp: 100,
    hp: 50,
    maxHp: 50,
    defense: 10,
    attack: 15,
    special: 12,
    soulPower: 0,
    actions: [
      basicActions.bite,
      basicActions.tackle,
      typeActions.Fire[0],
    ],
    sprite: '/assets/bugs/bout-ham.png',
    description: 'A small fiery bug with powerful jaws. Makes a great starter companion.',
    evolution: [
      {
        id: 'gnat-bot',
        name: 'Gnat Bot',
        requiredLevel: 15,
      },
    ],
  },
  {
    id: uuidv4(),
    name: 'Bleach Leach',
    type: 'Water',
    category: 'Common',
    level: 5,
    xp: 0,
    maxXp: 100,
    hp: 55,
    maxHp: 55,
    defense: 12,
    attack: 10,
    special: 15,
    soulPower: 0,
    actions: [
      basicActions.bite,
      basicActions.harden,
      typeActions.Water[0],
    ],
    sprite: '/assets/bugs/bleach-leach.png',
    description: 'A water-dwelling leech with surprising intelligence. Very loyal to its trainer.',
    evolution: [
      {
        id: 'floweb',
        name: 'Floweb',
        requiredLevel: 15,
      },
    ],
  },
  {
    id: uuidv4(),
    name: 'Bug Ive',
    type: 'Grass',
    category: 'Common',
    level: 5,
    xp: 0,
    maxXp: 100,
    hp: 45,
    maxHp: 45,
    defense: 8,
    attack: 12,
    special: 18,
    soulPower: 0,
    actions: [
      basicActions.tackle,
      basicActions.heal,
      typeActions.Grass[0],
    ],
    sprite: '/assets/bugs/bug-ive.png',
    description: 'A small plant-based bug that thrives in forests. Has natural healing abilities.',
    evolution: [
      {
        id: 'leaferfly',
        name: 'Leaferfly',
        requiredLevel: 15,
      },
    ],
  },
];

// Create some common bugs that can be found in the wild
export const commonBugs: Bug[] = [
  {
    id: uuidv4(),
    name: 'Shard Bug',
    type: 'Rock',
    category: 'Common',
    level: 3,
    xp: 0,
    maxXp: 80,
    hp: 40,
    maxHp: 40,
    defense: 18,
    attack: 8,
    special: 5,
    soulPower: 0,
    actions: [
      basicActions.tackle,
      basicActions.harden,
      typeActions.Rock[0],
    ],
    sprite: '/assets/bugs/shard-bug.png',
    description: 'A rock-like bug with crystal shards for protection. Often found in caves.',
  },
  {
    id: uuidv4(),
    name: 'Wind Hopper',
    type: 'Snow',
    category: 'Common',
    level: 4,
    xp: 0,
    maxXp: 90,
    hp: 35,
    maxHp: 35,
    defense: 7,
    attack: 12,
    special: 14,
    soulPower: 0,
    actions: [
      basicActions.tackle,
      basicActions.bite,
      typeActions.Snow[0],
    ],
    sprite: '/assets/bugs/wind-hopper.png',
    description: 'A small bug that jumps on cold winds. Can freeze opponents with its touch.',
  },
  {
    id: uuidv4(),
    name: 'Web',
    type: 'Corruption',
    category: 'Common',
    level: 4,
    xp: 0,
    maxXp: 90,
    hp: 30,
    maxHp: 30,
    defense: 6,
    attack: 14,
    special: 15,
    soulPower: 0,
    actions: [
      basicActions.bite,
      basicActions.tackle,
      typeActions.Corruption[0],
    ],
    sprite: '/assets/bugs/web.png',
    description: 'A corrupted spider that spreads toxins. Found in dark, abandoned places.',
  },
];

// Define the world bosses
export const bossBugs: Bug[] = [
  {
    id: 'titan-rock-burner',
    name: 'Titan Rock Burner',
    type: 'Fire',
    category: 'Boss',
    level: 20,
    xp: 0,
    maxXp: 500,
    hp: 200,
    maxHp: 200,
    defense: 40,
    attack: 45,
    special: 50,
    soulPower: 10,
    actions: [
      basicActions.bite,
      typeActions.Fire[0],
      typeActions.Fire[1],
      {
        id: 'inferno',
        name: 'Inferno',
        type: 'Fire',
        damage: 40,
        statusEffect: 'Burn',
        statusEffectChance: 0.5,
        description: 'Creates a massive inferno dealing heavy damage with high chance to burn.',
        isOverworld: false,
        isBattle: true,
        cooldown: 3,
      },
      {
        id: 'soul-crush',
        name: 'Soul Crush',
        type: 'Boss',
        damage: 50,
        description: 'A devastating attack that bypasses defense.',
        isOverworld: false,
        isBattle: true,
        cooldown: 5,
      },
    ],
    sprite: '/assets/bugs/titan-rock-burner.png',
    description: 'The guardian of the first soul. This massive fire bug has existed for centuries.',
  },
  {
    id: 'web-dragon',
    name: 'Web Dragon',
    type: 'Corruption',
    category: 'Boss',
    level: 25,
    xp: 0,
    maxXp: 600,
    hp: 250,
    maxHp: 250,
    defense: 35,
    attack: 60,
    special: 55,
    soulPower: 15,
    actions: [
      basicActions.bite,
      typeActions.Corruption[0],
      typeActions.Corruption[1],
      {
        id: 'web-trap',
        name: 'Web Trap',
        type: 'Corruption',
        statusEffect: 'Paralysis',
        statusEffectChance: 0.8,
        description: 'Traps the opponent in sticky webs, causing paralysis.',
        isOverworld: false,
        isBattle: true,
        cooldown: 2,
      },
      {
        id: 'swarm-call',
        name: 'Swarm Call',
        type: 'Boss',
        description: 'Summons minion bugs to assist in battle.',
        isOverworld: false,
        isBattle: true,
        cooldown: 4,
      },
    ],
    sprite: '/assets/bugs/web-dragon.png',
    description: 'Guardian of the second soul. A terrifying dragon-like bug that commands lesser spiders.',
  },
  {
    id: 'titan-scorpion',
    name: 'Titan Scorpion',
    type: 'Rock',
    category: 'Boss',
    level: 30,
    xp: 0,
    maxXp: 700,
    hp: 300,
    maxHp: 300,
    defense: 70,
    attack: 65,
    special: 40,
    soulPower: 20,
    actions: [
      basicActions.bite,
      typeActions.Rock[0],
      typeActions.Rock[1],
      {
        id: 'boulder-roll',
        name: 'Boulder Roll',
        type: 'Rock',
        damage: 70,
        description: 'Rolls massive boulders dealing heavy damage.',
        isOverworld: false,
        isBattle: true,
        cooldown: 3,
      },
      {
        id: 'earthquake',
        name: 'Earthquake',
        type: 'Rock',
        damage: 50,
        description: 'Creates a powerful earthquake affecting all bugs on field.',
        isOverworld: false,
        isBattle: true,
        cooldown: 4,
      },
    ],
    sprite: '/assets/bugs/titan-scorpion.png',
    description: 'Guardian of the third soul. An ancient scorpion of immense size and strength.',
  },
  {
    id: 'axolotle-bug-1',
    name: 'Axolotle Bug Part 1',
    type: 'Water',
    category: 'Boss',
    level: 35,
    xp: 0,
    maxXp: 800,
    hp: 350,
    maxHp: 350,
    defense: 55,
    attack: 60,
    special: 80,
    soulPower: 25,
    actions: [
      basicActions.bite,
      typeActions.Water[0],
      typeActions.Water[1],
      {
        id: 'tidal-wave',
        name: 'Tidal Wave',
        type: 'Water',
        damage: 60,
        description: 'Summons a massive wave dealing heavy damage.',
        isOverworld: false,
        isBattle: true,
        cooldown: 3,
      },
      {
        id: 'adaptive-armor',
        name: 'Adaptive Armor',
        type: 'Boss',
        description: 'Changes type resistance based on opponent\'s type.',
        isOverworld: false,
        isBattle: true,
        cooldown: 4,
      },
    ],
    sprite: '/assets/bugs/axolotle-bug-1.png',
    description: 'Guardian of the fourth soul. Phase one of the legendary aquatic bug with regenerative powers.',
  },
  {
    id: 'axolotle-bug-2',
    name: 'Axolotle Bug Part 2',
    type: 'Water',
    category: 'Final Boss',
    level: 40,
    xp: 0,
    maxXp: 1000,
    hp: 500,
    maxHp: 500,
    defense: 80,
    attack: 85,
    special: 90,
    soulPower: 100,
    actions: [
      basicActions.bite,
      typeActions.Water[0],
      {
        id: 'mega-evolution',
        name: 'Mega Evolution',
        type: 'Boss',
        description: 'Powers up mid-battle, increasing all stats.',
        isOverworld: false,
        isBattle: true,
        cooldown: 5,
      },
      {
        id: 'soul-drain',
        name: 'Soul Drain',
        type: 'Legendary',
        damage: 70,
        description: 'Powerful attack that drains opponent\'s energy and heals user.',
        isOverworld: false,
        isBattle: true,
        cooldown: 3,
      },
      {
        id: 'world-ender',
        name: 'World Ender',
        type: 'Boss',
        damage: 100,
        description: 'The ultimate attack that can only be used when critically injured.',
        isOverworld: false,
        isBattle: true,
        cooldown: 10,
      },
    ],
    sprite: '/assets/bugs/axolotle-bug-2.png',
    description: 'The final boss. This evolved form of the Axolotle Bug draws power from the four souls and threatens to destroy all bug life.',
  },
]; 